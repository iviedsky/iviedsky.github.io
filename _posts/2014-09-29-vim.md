---
layout: post
title: Vim命令 
category : 工具
tagline: "Supporting tagline"
tags : [工具,速查手册]
markdown: rdiscount
---
{% include JB/setup %}
---

##Vim命令合集

------
###历史命令

以:和/开头的命令都有历史记录，可以首先键入:或者/然后按上下箭头来选择某个历史命令。


###启动vim

在命令行窗口输入以下命令即可

vim  直接启动vim

vim filename 打开vim或者创建名为filename的文件

<!--break-->

###文件命令

打开单个文件

vim file


同时打开多个文件

vim file1 file2 file3


在当前vim窗口中打开一个新文件。（当前已经打开的文件会关闭，如果改动，会提示保存）

:open file


在分栏打开文件

:split file

:vsplit file (纵向打开)


切换到下一个文件分栏(n->next)

:bn

切换到上一个文件分栏(p->previous)

:bp


Ctrl+ww 移动到下一个窗口

Ctrl+wj 移动到下方的窗口

Ctrl+wk 移动到上方的窗口


打开远程文件，比如ftp或者share folder

:e ftp://xxx.xxx.xx.xx/demo

:e \\xxxxx\demo


###vim的模式


正常模式(按ESC或者Ctrl+[进入) 左下角显示文件名或为空

插入模式(按i进入) 左下角显示 --INSERT--

可视模式(按Ctrl+v/Shift+v进入) 左下角显示 --VISUAL--


###导航命令

% 定位到成对的括号另一个符号的位置，适用于大括号、小括号和方括号


###插入命令

i 在当前位置插入

I 在当前行首插入

a 在当前位置后插入

A 在当前行尾插入

o 在当前行之后插入一行

O 在当前行之前插入一行


###查找命令

/text 查找text，按n键查找下一个，按N键查找上一个

?text 查找text，反向查找（查找当前光标所在位置之前的），按n键查找下一个，按N键查找上一个

说明：在vim中，有一些特殊字符在查找时需要转义 .*[]^%?~$


:set ignorecase 忽略大小写查找

:set noignorecase 不忽略大小写查找


###替换命令

ra 将光标所在处的字符替换为a

s/old/new/ 用new替换old，替换当前行的第一个匹配

s/old/new/g 用new替换old，替换当前行的所有匹配

%s/old/new/ 用new替换old，替换所有行的第一个匹配

%s/old/new/g 用new替换old，替换整个文件的所有匹配


:10,20 s/^/#/ 将第10行到20行的代码注释掉（python）


###移动命令

h 左移一个字符

l 右移一个字符，这个命令很少用，一般用w代替。

k 上移一个字符

j 下移一个字符

以上四个命令可以配合数字使用，比如20j就是向下移动20行，5h就是向左移动5个字符，在Vim中，很多命令都可以配合数字使用，比如删除10个字符10x，在当前位置后插入3个！，3a！<Esc>，这里的Esc是必须的，否则命令不生效。


w 向前移动一个单词（光标停在单词首部），如果已到行尾，则转至下一行行首。此命令快，可以代替l命令。

b 向后移动一个单词 2b 向后移动2个单词

e，同w，只不过是光标停在单词尾部

ge，同b，光标停在单词尾部。


^ 移动到本行第一个非空白字符上。

0（数字0）移动到本行第一个字符上，

<HOME> 移动到本行第一个字符。同0健。


$ 移动到行尾 3$ 移动到下面3行的行尾

gg 移动到文件头。 = [[

G（shift + g） 移动到文件尾。 = ]]


f（find）命令也可以用于移动，fx将找到光标后第一个为x的字符，3fd将找到第三个为d的字符。

F 同f，反向查找。


跳到指定行，冒号+行号，回车，比如跳到240行就是 :240回车。另一个方法是行号+G，比如230G跳到230行。


Ctrl + e 向下滚动一行

Ctrl + y 向上滚动一行

Ctrl + d 向下滚动半屏

Ctrl + u 向上滚动半屏

Ctrl + f 向下滚动一屏

Ctrl + b 向上滚动一屏


###撤销和重做

u 撤销（Undo）

U 撤销对正行的操作

Ctrl + r 重做（Redo）


###删除命令

x 删除当前字符

3x 删除当前光标开始向后三个字符

X 删除当前字符的前一个字符。X=dh

dl 删除当前字符， dl=x

dh 删除前一个字符

dd 删除当前行

dj 删除当前行以及上一行

dk 删除当前行以及下一行

10d 删除当前行以及接下来的10行。

D 删除当前字符至行尾。D=d$

d$ 删除当前字符之后的所有字符（本行）

dgg 删除当前行以及之前所有行

dG（jd shift + g）   删除当前行以及之后所有行

:1,10d 删除1-10行

:11,$d 删除11行及以后所有的行

:1,$d 删除所有行

J(shift + j)　　删除两行之间的换行符，实际上是合并两行。


###拷贝和粘贴

viw 选定当前单词

yw 拷贝当前单词

yy 拷贝当前行

nyy 拷贝当前后开始的n行，比如2yy拷贝当前行及其下一行。

p 在当前光标后粘贴,如果之前使用了yy命令来复制一行，那么就在当前行的下一行粘贴。

P 在当前行前粘贴

:1,10 co 20 将1-10行拷贝一份并插入到第20行之后。


###剪切命令

正常模式下按v（逐字）或V（逐行）进入可视模式，然后用jklh命令移动即可选择某些行或字符，再按d即可剪切

ndd 剪切当前行之后的n行。利用p命令可以对剪切的内容进行粘贴

:1,10d 将1-10行剪切。利用p命令可将剪切后的内容进行粘贴。

:1, 10 m 20 将第1-10行移动到第20行之后。


###退出命令

:wq 保存并退出

ZZ 保存并退出

:q! 强制退出并忽略所有更改

:e! 放弃所有修改，并打开原来文件。


###高级技巧

zf 折叠选定的代码，zo 打开折叠的代码
=  格式化选定的代码
== 格式化当前行
gg=G 格式化全文
<  行左移
>  行右移，缩进
Ctrl+N Ctrl+P 在插入模式下，自动补全
